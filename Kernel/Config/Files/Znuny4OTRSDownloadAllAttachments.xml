<?xml version="1.0" encoding="utf-8" ?>
<otrs_config version="1.0" init="Changes">
    <ConfigItem Name="Frontend::Module###AgentTicketDownloadAllAttachments" Required="0" Valid="1">
        <Description Translatable="1">Frontend module registration for the agent interface.</Description>
        <Group>Znuny4OTRS-DownloadAllAttachments</Group>
        <SubGroup>Frontend::Agent::ModuleRegistration</SubGroup>
        <Setting>
            <FrontendModuleReg>
                <Description>Download multiple attachments as one zip file</Description>
                <Title>Download ticket attachments</Title>
                <NavBarName>Ticket</NavBarName>
            </FrontendModuleReg>
        </Setting>
    </ConfigItem>
    <ConfigItem Name="Ticket::Frontend::MenuModule###001-DownloadAllAttachments" Required="0" Valid="1">
        <Description Translatable="1">This configuration registers a link in the ticket menu to download all ticket attachments.</Description>
        <Group>Znuny4OTRS-DownloadAllAttachments</Group>
        <SubGroup>Frontend::Agent::Ticket::MenuModule</SubGroup>
        <Setting>
            <Hash>
                <Item Key="Module">Kernel::Output::HTML::TicketMenuGeneric</Item>
                <Item Key="Name">Download ticket attachments (zip)</Item>
                <Item Key="Description" Translatable="1">Download all attachments as one zip file</Item>
                <Item Key="Action"></Item>
                <Item Key="Link">Action=AgentTicketDownloadAllAttachments;TicketID=$QData{"TicketID"}</Item>
                <Item Key="Target"></Item>
                <Item Key="PopupType"></Item>
            </Hash>
        </Setting>
    </ConfigItem>
    <ConfigItem Name="Ticket::Frontend::PreMenuModule###442-DownloadAllAttachments" Required="0" Valid="1">
        <Description Translatable="1">This configuration registers a link in the ticket menu to the ticket overviews of the agent interface to download all ticket attachments.</Description>
        <Group>Znuny4OTRS-DownloadAllAttachments</Group>
        <SubGroup>Frontend::Agent::Ticket::MenuModulePre</SubGroup>
        <Setting>
            <Hash>
                <Item Key="Module">Kernel::Output::HTML::TicketMenuGeneric</Item>
                <Item Key="Name">Download ticket attachments (zip)</Item>
                <Item Key="Description" Translatable="1">Download all attachments as one zip file</Item>
                <Item Key="Action"></Item>
                <Item Key="Link">Action=AgentTicketDownloadAllAttachments;TicketID=$QData{"TicketID"};RedirectToSearch=1;</Item>
                <Item Key="Target"></Item>
                <Item Key="PopupType"></Item>
            </Hash>
        </Setting>
    </ConfigItem>
    <ConfigItem Name="Frontend::Output::FilterElementPre###OutputFilterZnuny4OTRSDownloadAllAttachments" Required="0" Valid="1">
        <Description Translatable="1">This configuration registers an output filter that adds a 'Download all (.zip)' link to the article attachment download box.</Description>
        <Group>Znuny4OTRS-DownloadAllAttachments</Group>
        <SubGroup>Core::Web</SubGroup>
            <Setting>
                <Hash>
                    <Item Key="Module">Kernel::Output::HTML::OutputFilterZnuny4OTRSDownloadAllAttachments</Item>
                    <Item Key="Templates">
                    <Hash>
                        <Item Key="AgentTicketZoom">1</Item>
                    </Hash>
                    </Item>
                </Hash>
            </Setting>
    </ConfigItem>
</otrs_config>
